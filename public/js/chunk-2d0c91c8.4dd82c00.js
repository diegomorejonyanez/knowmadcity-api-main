(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c91c8"],{"586e":function(t,e,r){"use strict";r.r(e);var a,s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Layout",[r("PageHeader",{attrs:{title:t.title,items:t.items}}),r("div",{staticClass:"clearfix mb-3"},[r("b-button",{staticClass:"float-right btn-info",attrs:{left:""},on:{click:function(e){t.$bvModal.show("modal"),t.editMode=!1,t.ver=!1}}},[t._v("Crear sac")])],1),r("div",{staticClass:"clearfix mb-3"},[r("b-button",{staticClass:"float-right btn-success",attrs:{left:""},on:{click:function(e){t.$bvModal.show("modal_csv"),t.editMode=!1,t.ver=!1}}},[t._v("Cargar CSV")])],1),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("h4",{staticClass:"card-title"}),r("div",{staticClass:"row mt-4"},[r("div",{staticClass:"col-sm-12 col-md-6"},[r("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[r("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Show "),r("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entries ")],1)])]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("div",{staticClass:"dataTables_filter text-md-right",attrs:{id:"tickets-table_filter"}},[r("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Search: "),r("b-form-input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"search",placeholder:"Search..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])])]),r("div",{staticClass:"table-responsive mb-0"},[r("b-table",{attrs:{items:t.sacs,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[r("b-dropdown",{attrs:{size:"sm"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" Action "),r("i",{staticClass:"mdi mdi-chevron-down"})]},proxy:!0}],null,!0)},[r("b-dropdown-item-button",{on:{click:function(r){t.editMode=!0,t.ver=!1,t.setear(e.item.id)}}},[t._v(" Editar ")]),r("b-dropdown-item-button",{on:{click:function(r){return t.eliminarsac(e.item.id)}}},[t._v(" Eliminar ")]),r("b-dropdown-item-button",{on:{click:function(r){t.editMode=!1,t.ver=!0,t.setear(e.item.id)}}},[t._v(" Ver ")])],1)]}}])})],1),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[r("ul",{staticClass:"pagination pagination-rounded mb-0"},[r("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])]),r("b-modal",{attrs:{id:"modal",false:"",size:"lg",title:"Gestión de servicios a cobro ","hide-footer":""}},[r("ValidationObserver",{ref:"form"},[r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Item ")]),r("ValidationProvider",{attrs:{name:"item",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.item,expression:"form.item"}],staticClass:"form-control",attrs:{type:"text",placeholder:" ",disabled:t.ver},domProps:{value:t.form.item},on:{input:function(e){e.target.composing||t.$set(t.form,"item",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(a[0]))])]}}])})],1)])],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Descripción")]),r("ValidationProvider",{attrs:{name:"descripcion",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.descripcion,expression:"form.descripcion"}],staticClass:"form-control",attrs:{type:"text",placeholder:" ",disabled:t.ver},domProps:{value:t.form.descripcion},on:{input:function(e){e.target.composing||t.$set(t.form,"descripcion",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(a[0]))])]}}])})],1)])],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Precio ")]),r("ValidationProvider",{attrs:{name:"precio",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.precio,expression:"form.precio"}],staticClass:"form-control",attrs:{type:"text",placeholder:" ",disabled:t.ver},domProps:{value:t.form.precio},on:{input:function(e){e.target.composing||t.$set(t.form,"precio",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(a[0]))])]}}])})],1)]),r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Medida ")]),r("ValidationProvider",{attrs:{name:"unidad",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.medida,expression:"form.medida"}],staticClass:"form-control",attrs:{type:"text",placeholder:" ",disabled:t.ver},domProps:{value:t.form.medida},on:{input:function(e){e.target.composing||t.$set(t.form,"medida",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(a[0]))])]}}])})],1)])],1)],1),t.ver||t.editMode?t._e():r("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Guardar")]),!t.ver&&t.editMode?r("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Editar")]):t._e()],1),r("b-modal",{attrs:{id:"modal_csv",false:"",size:"sm",title:"Cargar csv sac","hide-footer":""}},[r("ValidationObserver",{ref:"form"},[r("b-row",[r("b-col",[r("label",[t._v("CSV")]),r("b-form-file",{ref:"file",attrs:{id:"file",name:"file",placeholder:"Agregue Csv...","drop-placeholder":"Drop file here..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1)],1),r("button",{staticClass:"btn btn-block float-right btn-success my-2",on:{click:t.cuestionCargarCSV}},[t._v("Cargar")])],1)],1)},o=[],i=r("ade3"),n=r("1da1"),c=r("5530"),l=(r("96cf"),r("92c3")),d=r.n(l),u=r("2f62"),m=r("7bb1"),f=r("5658"),p=r("2579"),v=(a={components:{vueDropzone:d.a,Layout:f["a"],PageHeader:p["a"],ValidationProvider:m["b"],ValidationObserver:m["a"]},data:function(){return{title:"Administracion",items:[{text:"Gestión corporativa"},{text:"sacs",active:!0}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["item","descripcion","precio","actions"],sacs:[],editMode:!1,form:{id:"",item:"",descripcion:"",precio:"",medidad:""}}},computed:Object(c["a"])({},Object(u["d"])(["counter"])),created:function(){this.listarUsers()},filters:{moneda:function(t){var e=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}),r=e.format(t);return r}},methods:Object(c["a"])(Object(c["a"])({onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}},Object(u["b"])(["guardarUsuario"])),{},{switchLoc:function(){var t=this;this.editMode?this.$refs.form.validate().then((function(e){e&&t.editarsacs()})):this.$refs.form.validate().then((function(e){e&&t.agregarsac()}))},agregarsac:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in r=new FormData,a=t.form,a)r.append(s,a[s]);return e.next=5,t.axios.post("api/sac",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(200==e.status)for(var r in t.$swal("Agregado con exito!","","success"),t.listarsacs(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),a)t.form[r]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal(e.response.data)}));case 5:case"end":return e.stop()}}),e)})))()},editarsacs:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in r=new FormData,a=t.form,a)r.append(s,a[s]);return e.next=5,t.axios.put("api/sac",r).then((function(e){if(200==e.status)for(var r in t.$swal("Editado con exito!","","success"),t.listarsacs(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),a)t.form[r]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal("Error de peticion!","","warning")}));case 5:case"end":return e.stop()}}),e)})))()},eliminarsacs:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=new FormData,a.append("id",t),r.next=4,e.axios.post("api/sac/delete",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status&&(e.$swal("Eliminado con exito!","","success"),e.listarsacs())})).catch((function(t){console.log(t.response.data.menssage),e.$swal(t.response.data)}));case 4:case"end":return r.stop()}}),r)})))()},cuestionCargarCSV:function(){var t=this;this.$swal({title:"Desea cargar este csv?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(e){e.isConfirmed&&t.cargarCsv()}))},cargarCsv:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t.file),e.next=4,t.axios.post("api/sac/csv",r,{headers:{"Content-Type":"multipart/form-data",mimetype:"text/csv"}}).then((function(e){if(200==e.status)for(var r in t.$swal("Agregado con exito!","","success"),t.listarsacs(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),formulario)t.form[r]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal(e.response.data)}));case 4:case"end":return e.stop()}}),e)})))()},eliminarsac:function(t){var e=this;this.$swal({title:"Desea borrar esta sac?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(r){r.isConfirmed&&e.eliminarsacs(t)}))},resete:function(){var t=this.form;for(var e in t)this.form[e]=""},setear:function(t){for(var e=0;e<this.sacs.length;e++)if(this.sacs[e].id===t)return this.form.id=this.sacs[e].id,this.form.item=this.sacs[e].item,this.form.descripcion=this.sacs[e].descripcion,this.form.precio=this.sacs[e].descripcion,this.form.medida=this.sacs[e].medida,void this.$root.$emit("bv::show::modal","modal","#btnShow")},listarsacs:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/sac").then((function(e){t.sacs=e.data.rows})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},setEmail:function(){this.form.username=this.form.email,console.log("holas")},setRoles:function(){"Administrador"===this.form.tipo?(this.form.codigo="",this.form.entidad="No",this.form.cargo="",this.form.roles="3"):"Coordinador"===this.form.tipo?(this.form.entidad="No",this.form.cargo="",this.form.roles="2"):this.form.roles="1"},toggleModal:function(){this.modal=!this.modal},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})}})},Object(i["a"])(a,"created",(function(){this.session(),this.listarsacs()})),Object(i["a"])(a,"computed",{rows:function(){return this.sacs.length}}),a),h=v,b=r("2877"),g=Object(b["a"])(h,s,o,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0c91c8.4dd82c00.js.map