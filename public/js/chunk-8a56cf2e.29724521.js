(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a56cf2e"],{"019a":function(t,e,o){},"25f1":function(t,e,o){"use strict";o("019a")},"411d":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Layout",{staticClass:"authentication-bg-clients"},[r("PageHeader",{attrs:{title:t.title,items:t.items}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"card p-4",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"}},[r("div",{staticClass:" px-3 row justify-content-center"},[r("img",{staticStyle:{"border-radius":"100%"},attrs:{src:o("4ac0"),width:"200px",height:"200px",alt:""}})]),r("b-card",{staticClass:"rounded",staticStyle:{"max-width":"20rem","background-color":"rgba(0,0,0,0.5)",color:"white"},attrs:{"no-body":"","img-src":t.usuarioDB.imagen,"img-alt":"Image","img-top":""}},[r("b-card-body",{staticClass:"text-white",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"}},[r("b-card-sub-title",{staticClass:"mb-2 text-white"},[t._v(t._s(t.usuarioDB.nombre)+" "+t._s(t.usuarioDB.apellido))])],1),r("b-list-group",{staticClass:"text-white",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"},attrs:{flush:""}},[r("b-list-group-item",{staticClass:"text-white",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"},on:{click:function(e){return t.editar()}}},[t._v("Editar Perfil")]),r("b-list-group-item",{staticClass:"text-white",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"},on:{click:function(e){return t.setPass()}}},[t._v("Editar Pass")])],1),r("b-card-footer",{staticClass:"text-white",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"}},[r("a",{staticClass:"btn btn-outline-secondary",attrs:{href:""},on:{click:function(e){return t.salir()}}},[t._v(" Cerrar Sesión")])])],1)],1)]),r("div",{staticClass:"col-md-8",staticStyle:{"background-color":"rbga(0,0,0,0.6)"}},[r("div",{staticClass:"card",staticStyle:{"background-color":"rgba(0,0,0,0.5)",color:"white"}},[r("div",{staticClass:"p-4 row justify-content-between"},[r("div",{staticClass:" px-3"},[r("h3",{staticClass:"mb-2 nombre text-white"},[t._v(t._s(t.usuarioDB.nombre))]),r("p",[t._v("Correo: "+t._s(t.usuarioDB.email))])]),r("h5",{staticClass:"mb-0 text-white"},[t._v("Tipo de Usuario: "+t._s(t.usuarioDB.rol))])])])])]),r("b-modal",{attrs:{id:"modal",false:"",size:"lg",title:"Gestión de usuarios","hide-footer":""}},[r("ValidationObserver",{ref:"form"},[r("b-row",[r("b-col",[r("div",{attrs:{id:"preview"}},[t.url?r("img",{staticClass:"rounded",staticStyle:{float:"center!importan"},attrs:{width:"20%",src:t.url}}):t._e()]),r("b-form-file",{staticClass:"mt-3",attrs:{plain:""},on:{change:t.onFileChange},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Nombre "+t._s(t.editMode))]),r("ValidationProvider",{attrs:{name:"nombre",rules:"required|alpha_spaces"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.usuarioDB.nombre,expression:"usuarioDB.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.usuarioDB.nombre},on:{input:function(e){e.target.composing||t.$set(t.usuarioDB,"nombre",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Telefono")]),r("ValidationProvider",{attrs:{name:"telefono",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.telefono,expression:"form.telefono"}],staticClass:"form-control",attrs:{type:"text",placeholder:" "},domProps:{value:t.form.telefono},on:{input:function(e){e.target.composing||t.$set(t.form,"telefono",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Sexo")]),r("ValidationProvider",{attrs:{name:"sexo",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.sexo,expression:"form.sexo"}],staticClass:"form-control form-control-lg",attrs:{name:"tipo"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"sexo",e.target.multiple?o:o[0])}}},[r("option",{attrs:{value:"Masculino"}},[t._v("Masculino")]),r("option",{attrs:{value:"Femenino"}},[t._v("Femenino")])]),r("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1)],1),r("button",{staticClass:"btn btn-block btn-success",on:{click:function(e){return t.switchLoc()}}},[t._v("Editar Perfil")])],1),r("b-modal",{attrs:{id:"modalPass",false:"",size:"md",title:"Gestión de contraseña","hide-footer":""}},[r("ValidationObserver",{ref:"formPass"},[r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Contraseña")]),r("ValidationProvider",{attrs:{name:"password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:" "},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1),r("b-row",[r("b-col",[r("div",{staticClass:"form-group"},[r("label",[t._v("Confirmar contraseña")]),r("ValidationProvider",{attrs:{name:"repass",rules:"required|confirmed:password"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.repass,expression:"form.repass"}],staticClass:"form-control",attrs:{type:"password",placeholder:" "},domProps:{value:t.form.repass},on:{input:function(e){e.target.composing||t.$set(t.form,"repass",e.target.value)}}}),r("span",{staticStyle:{color:"red"}},[t._v(t._s(o[0]))])]}}])})],1)])],1)],1),r("button",{staticClass:"btn btn-block btn-success",on:{click:function(e){return t.switchLocPass()}}},[t._v("Editar Contraseña")])],1),r("footer",{staticClass:"footer dark",staticStyle:{"background-color":"#505d69",color:"#fff"}},[r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-6"},[t._v(" 2021 © ")]),r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"text-sm-right d-none d-sm-block"},[t._v(" Desarrollado por © Innova Tu Hotel ")])])])])])],1)},a=[],s=o("1da1"),i=o("5530"),n=(o("2b3d"),o("d3b7"),o("3ca3"),o("ddb0"),o("96cf"),o("2f62")),l=o("7bb1"),c=o("5658"),u=o("2579"),d={components:{Layout:c["a"],PageHeader:u["a"],ValidationProvider:l["b"],ValidationObserver:l["a"]},data:function(){return{title:"Gestio de perfil",items:[{text:"Perfil"}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["nombre_tercero","descripcion_tercero","actions"],user:[],terceros:[],editMode:!1,form:{id:"",nombre:"",username:"",apellido:"",email:"",telefono:"",tipo:"",sexo:"",entidad:"",cargo:"",codigo:"",foto:"",password:"",repass:"",roles:""}}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(n["b"])(["guardarUsuario"])),Object(n["b"])(["cerrarSession"])),{},{salir:function(){localStorage.removeItem("token"),this.$router.push({name:"Home"}),this.cerrarSession()},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})},listarUsers:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/pefil").then((function(e){t.user=e.data,console.log(e.data)})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},editar:function(){this.form.nombre=this.usuarioDB.nombre,this.form.apellido=this.user.apellido,this.form.email=this.user.email,this.form.telefono=this.user.telefono,this.form.tipo=this.user.tipo,this.form.sexo=this.user.sexo,this.form.entidad=this.user.entidad,this.form.cargo=this.user.cargo,this.form.codigo=this.user.codigo,this.form.imagen=this.user.imagen,this.$root.$emit("bv::show::modal","modal","#btnShow")},setPass:function(){this.$root.$emit("bv::show::modal","modalPass","#btnShow")},login:function(){},switchLoc:function(){var t=this;this.$refs.form.validate().then((function(e){e&&t.editarUsuario()}))},switchLocPass:function(){var t=this;this.$refs.formPass.validate().then((function(e){e?t.editarPassword():t.$swal("Contraseñas no coinciden!","warning")}))},editarUsuario:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in o=new FormData,t.file&&o.append("filename",t.file),r=t.form,r)o.append(a,r[a]);return e.next=6,t.axios.put("/pefil",o).then((function(e){if(200==e.status)for(var o in t.$swal("Usuario Editardo","","success"),t.guardarUsuario(e.data.accessToken),t.$root.$emit("bv::hide::modal","modal","#btnShow"),r)t.form[o]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal("No se pudo editar","","warning")}));case 6:case"end":return e.stop()}}),e)})))()},editarPassword:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in o=new FormData,r=t.form,r)o.append(a,r[a]);return e.next=5,t.axios.put("auth/recover-password",o).then((function(e){if(200==e.status)for(var o in t.$swal("Contraseña Editada","","success"),t.$root.$emit("bv::hide::modal","modalPass","#btnShow"),r)t.form[o]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal("No se pudo editar","","warning")}));case 5:case"end":return e.stop()}}),e)})))()},onFileChange:function(t){var e=t.target.files[0];this.url=URL.createObjectURL(e)},toggleModal:function(){this.modal=!this.modal}}),created:function(){this.session(),this.listarUsers()},computed:Object(i["a"])(Object(i["a"])({},Object(n["d"])(["usuarioDB"])),{},{rows:function(){return this.user.length}})},m=d,f=(o("25f1"),o("2877")),p=Object(f["a"])(m,r,a,!1,null,null,null);e["default"]=p.exports},"4ac0":function(t,e,o){t.exports=o.p+"img/perfil.f16d36d9.png"}}]);
//# sourceMappingURL=chunk-8a56cf2e.29724521.js.map